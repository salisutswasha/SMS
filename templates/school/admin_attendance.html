{% extends 'school/adminbase.html' %}

{% block content %}

<head>
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>

  <style media="screen">
    a:link { text-decoration: none; }
    h6 { text-align: center; }
    .row { margin: 100px; }
  </style>
</head>

<div class="container">
  <div class="row">
    <div class="panel panel-primary">
      <div class="panel-heading">
        <h6 class="panel-title">Attendance</h6>
      </div>

      <table class="table table-hover" id="dev-table">
        <thead>
          <tr>
            <th>Group</th>
            <th>Total Students</th>
            <th>Take Attendance</th>
            <th>View Attendance</th>
          </tr>
        </thead>

        <tbody>
          <tr>
            <td>All Students</td>
            <td>
              {% if students %}
                {{ students|length }}
              {% else %}
                —
              {% endif %}
            </td>
            <td>
              <a class="btn btn-primary btn-xs" href="{% url 'admin-take-attendance' 'all' %}">
                <span class="glyphicon glyphicon-plus"></span>
              </a>
            </td>
            <td>
              <a class="btn btn-danger btn-xs" href="{% url 'admin-view-attendance' 'all' %}">
                <span class="glyphicon glyphicon-eye-open"></span>
              </a>
            </td>
          </tr>
        </tbody>
      </table>

      {# Optional: quick peek list so you "fetch details of students" right here #}
      <div class="panel-body" style="padding-top:0;">
        <h5>Students Preview</h5>
        <ul class="list-unstyled" style="max-height:220px; overflow:auto;">
          {% if students %}
            {% for s in students %}
              <li>
                {{ s.get_name }} — {{ s.gender|default:"—" }} — {{ s.mobile|default:"—" }}
              </li>
            {% empty %}
              <li>No students found.</li>
            {% endfor %}
          {% else %}
            <li>No students loaded in context. (Pass <code>students</code> from the view.)</li>
          {% endif %}
        </ul>
      </div>

    </div>
  </div>
</div>

{% endblock content %}
